# Notes and understanding


## Sound generation

From inspecting Contest.pas and Main.pas, I think the original MorseRunner works
by (continuously) creating a .wav file and then playing it back.

The number of samples of this signal is Ini.BufSize, whose def I failed to 
locate.

From a cursory inspection of the code contained in *Contest.pas*, I believe 
audio is largely if not entirely managed and synthesized in the complex Fourier
domain. For instance the background noise seems to be generated by 

    - create an array of N elements for the signal real part
    - create an array of N elements for the signal real part
    - init each elements with **unif.** distributed random numbers, in [-A ; A]
    - where A = 3 * NOISEAMP (NOISEAMP = 6000) 

    The atmospheric noise (QRN) is additionally rendered as it follows:

    1- increase by a factor 20 the limit A, but not of all elements of the array.
    This is done randomly (with prob 0.01 - read 1% of the elements only) 
    and acting only on the real part

    2- simulate a *burst*, randomly generating events (i.e. Stations.AddQrn) with
    probability 0.01

Note: this does NOT happen within a loop through time, since it is in the Fourier
domain. So there is no loop: the buffer is set at the start and its content 
manipulated before (I think) playback.

Maybe this strategy makes it very easy to "mix" signals as well as to change
bandwidth.




## Files comments

- Main.dfm  (GUI definition)
- Main.pas